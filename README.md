# ๐ค Systech AIDD Test - Telegram LLM Assistant Bot

![Build Status](https://github.com/Oleg-Khalyava/systech-aidd-test/actions/workflows/build.yml/badge.svg?branch=day-6-devops)

> Production-ready Telegram-ะฑะพั ั ะธะฝัะตะณัะฐัะธะตะน LLM ัะตัะตะท OpenRouter API

Telegram-ะฑะพั ะฝะฐ Python, ะบะพัะพััะน ัะฐะฑะพัะฐะตั ะบะฐะบ AI-ะฐััะธััะตะฝั ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ัะฐะทะปะธัะฝัั LLM ะผะพะดะตะปะตะน ัะตัะตะท OpenRouter. ะัะพะตะบั ัะปะตะดัะตั ะฟัะธะฝัะธะฟะฐะผ **KISS** (Keep It Simple, Stupid) ะธ **SOLID**, ัะพะทะดะฐะฝ ั ัะพะบััะพะผ ะฝะฐ ะฟัะพััะพัั, ะฝะฐะดะตะถะฝะพััั, ะฑะตะทะพะฟะฐัะฝะพััั ะธ ะบะฐัะตััะฒะพ ะบะพะดะฐ.

**ะกัะฐััั:** โ Production Ready (v3.0 - Sprint S1) | **ะขะตััะพะฒ:** 105+ | **ะะฐัะตััะฒะพ:** 9/10

---

## โจ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

- ๐ฌ **ะะพะฝัะตะบััะฝัะต ะดะธะฐะปะพะณะธ** - ะฑะพั ะฟะพะผะฝะธั ะธััะพัะธั ัะฐะทะณะพะฒะพัะฐ (ะดะพ 10 ะฟะพัะปะตะดะฝะธั ัะพะพะฑัะตะฝะธะน)
- ๐พ **ะะตััะธััะตะฝัะฝะพะต ััะฐะฝะตะฝะธะต** - SQLite ะฑะฐะทะฐ ะดะฐะฝะฝัั, ะธััะพัะธั ัะพััะฐะฝัะตััั ะผะตะถะดั ะฟะตัะตะทะฐะฟััะบะฐะผะธ
- ๐ **ะะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ** - FTS5 ะดะปั ะฑััััะพะณะพ ะฟะพะธัะบะฐ ะฟะพ ะธััะพัะธะธ ัะพะพะฑัะตะฝะธะน
- ๐ง **ะะฝัะตะณัะฐัะธั ั LLM** - ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะฐะทะปะธัะฝัั ะผะพะดะตะปะตะน ัะตัะตะท OpenRouter API
- ๐ **ะฃะฟัะฐะฒะปะตะฝะธะต ะบะพะฝัะตะบััะพะผ** - ะบะพะผะฐะฝะดะฐ `/clear` ะดะปั ะฝะฐัะฐะปะฐ ะฝะพะฒะพะณะพ ะดะธะฐะปะพะณะฐ
- ๐ **ะะตะทะพะฟะฐัะฝะพััั** - rate limiting, ะฒะฐะปะธะดะฐัะธั ะฒัะพะดะฝัั ะดะฐะฝะฝัั, ัะบัััะธะต ะฒะฝัััะตะฝะฝะธั ะพัะธะฑะพะบ
- ๐๏ธ **Soft delete** - ะฑะตะทะพะฟะฐัะฝะพะต ัะดะฐะปะตะฝะธะต ะดะฐะฝะฝัั ั ะฒะพะทะผะพะถะฝะพัััั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั
- ๐๏ธ **ะงะธััะฐั ะฐััะธัะตะบัััะฐ** - Dependency Injection, Repository pattern, SOLID ะฟัะธะฝัะธะฟั
- ๐ **ะะธะณัะฐัะธะธ ะะ** - Alembic ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฒะตััะธัะผะธ ััะตะผั ะฑะฐะทั ะดะฐะฝะฝัั
- ๐ณ **Docker Ready** - ะณะพัะพะฒัะน multi-stage Dockerfile ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะฟัะธะผะตะฝะตะฝะธะตะผ ะผะธะณัะฐัะธะน
- ๐ **ะกะธััะตะผะฐ ะผะตััะธะบ** - ะพััะปะตะถะธะฒะฐะฝะธะต ะทะฐะฟัะพัะพะฒ, ะพัะธะฑะพะบ, ัะพะบะตะฝะพะฒ ะธ ััะพะธะผะพััะธ
- ๐ **ะะฐะดะตะถะฝะพััั** - retry logic ะดะปั ัะตัะตะฒัั ัะฑะพะตะฒ, graceful shutdown
- ๐ **ะะพะปะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต** - ะฒัะต ะดะตะนััะฒะธั ะทะฐะฟะธััะฒะฐัััั ะฒ ัะฐะนะป ั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ัะพัะฐัะธะตะน
- โ๏ธ **ะะธะฑะบะฐั ะฝะฐัััะพะนะบะฐ** - ะบะพะฝัะธะณััะฐัะธั ัะตัะตะท ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
- โ **ะััะพะบะพะต ะฟะพะบัััะธะต ัะตััะฐะผะธ** - 105+ ัะตััะพะฒ, ะฟะพะบัััะธะต ะบะพะดะฐ
- ๐ **Production Ready** - ะณะพัะพะฒ ะบ ัะฐะทะฒะตัััะฒะฐะฝะธั ะฒ ะฟัะพะดะฐะบัะตะฝะต

---

## ๐ณ ะัััััะน ััะฐัั ั Docker

ะกะฐะผัะน ะฑัััััะน ัะฟะพัะพะฑ ะทะฐะฟัััะธัั ะฒัะต ัะตัะฒะธัั ะฟัะพะตะบัะฐ ะปะพะบะฐะปัะฝะพ:

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- [Docker](https://www.docker.com/get-started) (ะฒะตััะธั 20.10+)
- [Docker Compose](https://docs.docker.com/compose/install/) (ะฒะตััะธั 2.0+)

### ะะฐะฟััะบ ะทะฐ 3 ัะฐะณะฐ

**1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน:**
```bash
git clone <repository-url>
cd systech-aidd-test
```

**2. ะะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
```bash
cp .env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env ะธ ะดะพะฑะฐะฒััะต ะฒะฐัะธ ัะพะบะตะฝั
```

**3. ะะฐะฟัััะธัะต ะฒัะต ัะตัะฒะธัั:**
```bash
make docker-up
```

ะะปะธ ะฝะฐะฟััะผัั ัะตัะตะท docker-compose:
```bash
docker-compose up -d
```

### ะะพัััะฟ ะบ ัะตัะฒะธัะฐะผ

ะะพัะปะต ะทะฐะฟััะบะฐ ะฒัะต ัะตัะฒะธัั ะฑัะดัั ะดะพัััะฟะฝั ะฟะพ ะฐะดัะตัะฐะผ:

- ๐จ **Frontend Dashboard:** http://localhost:3000
- ๐ **Backend API:** http://localhost:8000/docs
- ๐ค **Telegram Bot:** ะพัะฟัะฐะฒััะต `/start` ะฒะฐัะตะผั ะฑะพัั ะฒ Telegram

### ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะะพัะผะพััะตัั ะปะพะณะธ ะฒัะตั ัะตัะฒะธัะพะฒ
make docker-logs

# ะัะพะฒะตัะธัั ััะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
make docker-status

# ะััะฐะฝะพะฒะธัั ะฒัะต ัะตัะฒะธัั
make docker-down

# ะะตัะตะทะฐะฟัััะธัั ัะตัะฒะธัั
make docker-restart

# ะัะธััะธัั ะบะพะฝัะตะนะฝะตัั ะธ volumes
make docker-clean
```

### ะงัะพ ะฟัะพะธััะพะดะธั ะฟัะธ ะทะฐะฟััะบะต?

Docker ะฐะฒัะพะผะฐัะธัะตัะบะธ:
- ๐จ ะกะพะฑะธัะฐะตั ะพะฑัะฐะทั ะดะปั ะฒัะตั 3 ัะตัะฒะธัะพะฒ (Bot, API, Frontend)
- ๐๏ธ ะัะธะผะตะฝัะตั ะผะธะณัะฐัะธะธ ะฑะฐะทั ะดะฐะฝะฝัั
- ๐ ะกะพะทะดะฐะตั volumes ะดะปั SQLite ะะ ะธ ะปะพะณะพะฒ
- ๐ ะะฐัััะฐะธะฒะฐะตั ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะฟะตัะตะทะฐะฟััะบ ะฟัะธ ัะฑะพัั
- ๐ ะัะพะฑัะฐััะฒะฐะตั ะฟะพััั ะดะปั API (8000) ะธ Frontend (3000)

### ะกัััะบัััะฐ ัะตัะฒะธัะพะฒ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Frontend (Next.js)                โ
โ   http://localhost:3000             โ
โ   - Dashboard ั ะผะตััะธะบะฐะผะธ           โ
โ   - ะะธะทัะฐะปะธะทะฐัะธั ััะฐัะธััะธะบะธ         โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ HTTP API
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Backend API (FastAPI)             โ
โ   http://localhost:8000             โ
โ   - REST API ัะฝะดะฟะพะธะฝัั              โ
โ   - ะกัะฐัะธััะธะบะฐ ะธ ะผะตััะธะบะธ            โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ SQLite
               โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   Telegram Bot (aiogram)            โ
โ   - ะะฑัะฐะฑะพัะบะฐ ัะพะพะฑัะตะฝะธะน             โ
โ   - ะะฝัะตะณัะฐัะธั ั LLM                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โผ
      SQLite Database (./data/bot.db)
```

---

## ๐ CI/CD ะธ ะณะพัะพะฒัะต Docker ะพะฑัะฐะทั

### ะะฒัะพะผะฐัะธัะตัะบะฐั ัะฑะพัะบะฐ

ะัะพะตะบั ะธัะฟะพะปัะทัะตั **GitHub Actions** ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ัะฑะพัะบะธ ะธ ะฟัะฑะปะธะบะฐัะธะธ Docker ะพะฑัะฐะทะพะฒ ะฟัะธ ะบะฐะถะดะพะผ ะธะทะผะตะฝะตะฝะธะธ ะบะพะดะฐ.

**ะกัะฐััั ัะฑะพัะบะธ:** ![Build Status](https://github.com/Oleg-Khalyava/systech-aidd-test/actions/workflows/build.yml/badge.svg?branch=day-6-devops)

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะณะพัะพะฒัั ะพะฑัะฐะทะพะฒ ะธะท GitHub Container Registry

ะะผะตััะพ ะปะพะบะฐะปัะฝะพะน ัะฑะพัะบะธ ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ะณะพัะพะฒัะต ะพะฑัะฐะทั ะธะท GitHub Container Registry:

```bash
# Pull ะพะฑัะฐะทะพะฒ ะธะท registry
docker pull ghcr.io/oleg-khalyava/systech-aidd-test-bot:latest
docker pull ghcr.io/oleg-khalyava/systech-aidd-test-api:latest
docker pull ghcr.io/oleg-khalyava/systech-aidd-test-frontend:latest

# ะะปะธ ัะตัะตะท Makefile (pull ะฒัะตั ะพะฑัะฐะทะพะฒ)
make docker-prod-pull
```

### ะัััััะน ะทะฐะฟััะบ ั ะณะพัะพะฒัะผะธ ะพะฑัะฐะทะฐะผะธ

```bash
# 1. ะะฐัััะพะนัะต .env ัะฐะนะป
cp .env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env

# 2. Pull ะพะฑัะฐะทะพะฒ
make docker-prod-pull

# 3. ะะฐะฟััะบ ัะตัะฒะธัะพะฒ
make docker-prod-up

# 4. ะัะพะฒะตัะบะฐ ััะฐัััะฐ
docker ps

# 5. ะัะพัะผะพัั ะปะพะณะพะฒ
make docker-prod-logs
```

### ะะพะผะฐะฝะดั ะดะปั ัะฐะฑะพัั ั production ะพะฑัะฐะทะฐะผะธ

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `make docker-prod-pull` | ะกะบะฐัะฐัั ะพะฑัะฐะทั ะธะท registry |
| `make docker-prod-up` | ะะฐะฟัััะธัั ัะตัะฒะธัั ะธะท registry |
| `make docker-prod-down` | ะััะฐะฝะพะฒะธัั production ัะตัะฒะธัั |
| `make docker-prod-restart` | ะะตัะตะทะฐะฟัััะธัั production ัะตัะฒะธัั |
| `make docker-prod-logs` | ะะพะบะฐะทะฐัั ะปะพะณะธ production ัะตัะฒะธัะพะฒ |

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะพะฝะบัะตัะฝะพะน ะฒะตััะธะธ

```bash
# ะัะฟะพะปัะทะพะฒะฐัั ะพะฑัะฐะท ั ะบะพะฝะบัะตัะฝัะผ commit SHA
IMAGE_TAG=sha-abc1234 make docker-prod-up

# ะะปะธ
export IMAGE_TAG=sha-abc1234
make docker-prod-up
```

### ะะตัะตะบะปััะตะฝะธะต ะผะตะถะดั ัะตะถะธะผะฐะผะธ

```bash
# Local Build - ัะฑะพัะบะฐ ะธะท ะธััะพะดะฝะธะบะพะฒ
make docker-up

# Production - ะณะพัะพะฒัะต ะพะฑัะฐะทั ะธะท registry
make docker-prod-up
```

**ะะพะดัะพะฑะฝะตะต:** ัะผ. [devops/README.md](devops/README.md) ะธ [DevOps Roadmap](devops/doc/devops-roadmap.md)

---

## ๐๏ธ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

| ะะพะผะฟะพะฝะตะฝั | ะขะตัะฝะพะปะพะณะธั | ะะฐะทะฝะฐัะตะฝะธะต |
|-----------|-----------|-----------|
| **ะฏะทัะบ** | Python 3.11+ | ะัะฝะพะฒะฝะพะน ัะทัะบ ัะฐะทัะฐะฑะพัะบะธ |
| **Bot Framework** | aiogram 3.x | ะะฐะฑะพัะฐ ั Telegram Bot API |
| **LLM Client** | openai | ะะทะฐะธะผะพะดะตะนััะฒะธะต ั OpenRouter API |
| **Database** | SQLite + FTS5 | ะะตััะธััะตะฝัะฝะพะต ััะฐะฝะตะฝะธะต + ะฟะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ |
| **DB Driver** | aiosqlite | Async ะดัะฐะนะฒะตั ะดะปั SQLite |
| **Migrations** | Alembic | ะฃะฟัะฐะฒะปะตะฝะธะต ะฒะตััะธัะผะธ ััะตะผั ะะ |
| **Package Manager** | uv | ะฃะฟัะฐะฒะปะตะฝะธะต ะทะฐะฒะธัะธะผะพัััะผะธ |
| **Container** | Docker + Docker Compose | ะะพะฝัะตะนะฝะตัะธะทะฐัะธั ะฟัะธะปะพะถะตะฝะธั |
| **CI/CD** | GitHub Actions | ะะฒัะพะผะฐัะธัะตัะบะฐั ัะฑะพัะบะฐ ะธ ะฟัะฑะปะธะบะฐัะธั ะพะฑัะฐะทะพะฒ |
| **Registry** | GitHub Container Registry (ghcr.io) | ะฅัะฐะฝะตะฝะธะต Docker ะพะฑัะฐะทะพะฒ |
| **Testing** | pytest + pytest-asyncio + pytest-cov | ะะฒัะพะผะฐัะธัะตัะบะพะต ัะตััะธัะพะฒะฐะฝะธะต |
| **Linting** | ruff | ะัััััะน ะปะธะฝัะตั (E, W, F, I, N, UP, B, C4, SIM) |
| **Type Checking** | mypy | ะกัะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ัะธะฟะพะฒ (strict mode) |
| **Code Style** | black | ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ะบะพะดะฐ |
| **Config** | python-dotenv | ะะฐะณััะทะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั |

### ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ
โ  Telegram User  โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ       Bot (aiogram)             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ   Middleware Layer       โ   โ
โ  โ  โข Rate Limiting         โ   โ
โ  โ  โข Dependency Injection  โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ     Handlers + Validators       โ
โ  (ะพะฑัะฐะฑะพัะบะฐ ะบะพะผะฐะฝะด ะธ ะฒะฐะปะธะดะฐัะธั) โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ    BotDependencies (DI)         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ โข UserRepository        โ    โ
โ  โ โข MessageRepository     โ    โ
โ  โ โข LLM Client (retry)    โ    โ
โ  โ โข RoleManager           โ    โ
โ  โ โข Config                โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โโโโโโโโโโฌโโโโโโโโโฌโโโโโโโโโโโโโโโโ
         โ        โ
         โผ        โผ
โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ
โ   LLM Client    โ  โ  SQLite Database โ
โ                 โ  โ   โข users        โ
โโโโโโโโโโโโโโโโโโโ  โ   โข messages     โ
         โ           โ   โข messages_fts โ
         โ           โโโโโโโโโโโโโโโโโโโโ
         โผ
   OpenRouter API
```

---

## ๐ฆ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### ะจะฐะณ 1: ะฃััะฐะฝะพะฒะบะฐ uv (ะตัะปะธ ะตัะต ะฝะต ัััะฐะฝะพะฒะปะตะฝ)

**Windows:**
```powershell
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

**Linux/macOS:**
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### ะจะฐะณ 2: ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone <repository-url>
cd systech-aidd-test
```

### ะจะฐะณ 3: ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
make install
```

ะะปะธ ะฒัััะฝัั:
```bash
uv sync --all-extras
```

### ะจะฐะณ 4: ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:

```bash
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# OpenRouter API
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=gpt-oss-20b

# Bot Settings
DEFAULT_SYSTEM_PROMPT=ะขั ะฟะพะปะตะทะฝัะน AI-ะฐััะธััะตะฝั
SYSTEM_PROMPT_FILE=prompts/nutritionist.txt
MAX_CONTEXT_MESSAGES=10
WELCOME_MESSAGE=ั AI-ะฐััะธััะตะฝั ะฝะฐ ะฑะฐะทะต LLM. ะะฐะดะฐะฒะฐะน ะปัะฑัะต ะฒะพะฟัะพัั, ะธ ั ะฟะพััะฐัะฐััั ะฟะพะผะพัั!

# Database Settings
DATABASE_PATH=data/bot.db

# Logging (ะพะฟัะธะพะฝะฐะปัะฝะพ)
LOG_FILE=logs/bot.log
LOG_LEVEL=INFO
```

ะกะผ. ะฟะพะปะฝัะน ะฟัะธะผะตั ะฒ ัะฐะนะปะต [.env.example](.env.example)

### ะจะฐะณ 5: ะะพะปััะตะฝะธะต ัะพะบะตะฝะพะฒ

#### Telegram Bot Token:
1. ะะฐะนะดะธัะต [@BotFather](https://t.me/botfather) ะฒ Telegram
2. ะัะฟัะฐะฒััะต ะบะพะผะฐะฝะดั `/newbot`
3. ะกะปะตะดัะนัะต ะธะฝััััะบัะธัะผ ะดะปั ัะพะทะดะฐะฝะธั ะฑะพัะฐ
4. ะกะบะพะฟะธััะนัะต ะฟะพะปััะตะฝะฝัะน ัะพะบะตะฝ ะฒ `.env`

#### OpenRouter API Key:
1. ะะฐัะตะณะธัััะธััะนัะตัั ะฝะฐ [OpenRouter](https://openrouter.ai/)
2. ะะพะปััะธัะต API ะบะปัั ะฒ ะปะธัะฝะพะผ ะบะฐะฑะธะฝะตัะต
3. ะะพะฑะฐะฒััะต ะตะณะพ ะฒ `.env`

### ะจะฐะณ 6: ะัะธะผะตะฝะตะฝะธะต ะผะธะณัะฐัะธะน ะฑะฐะทั ะดะฐะฝะฝัั

```bash
uv run alembic upgrade head
```

ะะธะณัะฐัะธะธ ัะพะทะดะฐะดัั ะฒัะต ะฝะตะพะฑัะพะดะธะผัะต ัะฐะฑะปะธัั ะฒ ะะ SQLite.

### ะจะฐะณ 7: ะะฐะฟััะบ ะฑะพัะฐ

```bash
make run
```

ะะปะธ ะฝะฐะฟััะผัั:
```bash
uv run python -m src.main
```

ะะพั ะทะฐะฟััะตะฝ! ะัะฟัะฐะฒััะต ะตะผั ะบะพะผะฐะฝะดั `/start` ะฒ Telegram.

### ๐ณ ะะฐะฟััะบ ัะตัะตะท Docker

> ๐ก **ะะตะบะพะผะตะฝะดัะตััั:** ะะปั ะฑััััะพะณะพ ััะฐััะฐ ะธัะฟะพะปัะทัะนัะต Docker! ะกะผ. ะฟะพะดัะพะฑะฝัะน ัะฐะทะดะตะป [๐ณ ะัััััะน ััะฐัั ั Docker](#-ะฑัััััะน-ััะฐัั-ั-docker) ะฒััะต.

ะัะฐัะบะฐั ะฒะตััะธั:

```bash
# ะะฐัััะพะนะบะฐ ะธ ะทะฐะฟััะบ
cp .env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env
make docker-up

# ะัะพัะผะพัั ะปะพะณะพะฒ
make docker-logs

# ะััะฐะฝะพะฒะบะฐ
make docker-down
```

---

## ๐ฎ ะะพะผะฐะฝะดั ะฑะพัะฐ

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `/start` | ะะฝะธัะธะฐะปะธะทะฐัะธั ะฑะพัะฐ ะธ ะฟัะธะฒะตัััะฒะธะต |
| `/clear` | ะัะธััะบะฐ ะธััะพัะธะธ ะดะธะฐะปะพะณะฐ (ะฝะฐัะฐัั ะทะฐะฝะพะฒะพ) |
| `/role` | ะะพะบะฐะทะฐัั ัะตะบัััั ัะพะปั ะธ ัะฟะตัะธะฐะปะธะทะฐัะธั ะฑะพัะฐ |
| `/help` | ะกะฟะธัะพะบ ะดะพัััะฟะฝัั ะบะพะผะฐะฝะด |
| *ะัะฑะพะน ัะตะบัั* | ะัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธั AI-ะฐััะธััะตะฝัั ั ััะตัะพะผ ะบะพะฝัะตะบััะฐ |

---

## ๐ธ ะะตะผะพะฝัััะฐัะธั ัะฐะฑะพัั

<!-- ะะพะฑะฐะฒััะต ััะดะฐ ัะบัะธะฝัะพั ะธะปะธ GIF ั ัะฐะฑะพัะพะน ะฑะพัะฐ -->

> ๐ก **ะกะพะฒะตั:** ะกะดะตะปะฐะนัะต ัะบัะธะฝัะพั ะดะธะฐะปะพะณะฐ ั ะฑะพัะพะผ ะธะปะธ ะทะฐะฟะธัะธัะต ะบะพัะพัะบะพะต GIF, ะฟะพะบะฐะทัะฒะฐััะตะต ะพัะฝะพะฒะฝัะต ััะฝะบัะธะธ, ะธ ะดะพะฑะฐะฒััะต ััะดะฐ.

**ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:**
```
ะะพะปัะทะพะฒะฐัะตะปั: /start
ะะพั: ๐ ะัะธะฒะตั! ะฏ AI-ะฐััะธััะตะฝั...

ะะพะปัะทะพะฒะฐัะตะปั: ะะฐััะบะฐะถะธ ะฟัะพ Python
ะะพั: Python - ััะพ ะฒััะพะบะพััะพะฒะฝะตะฒัะน...

ะะพะปัะทะพะฒะฐัะตะปั: ะ ะบะฐะบะธะต ั ะฝะตะณะพ ะฟัะตะธะผััะตััะฒะฐ?
ะะพั: (ะฟะพะผะฝะธั ะบะพะฝัะตะบัั ะธ ะพัะฒะตัะฐะตั ะฟัะพ Python)

ะะพะปัะทะพะฒะฐัะตะปั: /clear
ะะพั: ๐งน ะััะพัะธั ะดะธะฐะปะพะณะฐ ะพัะธัะตะฝะฐ...
```

---

## ๐งช ะะฐะทัะฐะฑะพัะบะฐ

### ะะพะผะฐะฝะดั ัะฐะทัะฐะฑะพัะบะธ

```bash
# ะะฐะฟััะบ ัะตััะพะฒ
make test

# ะะฐะฟััะบ ัะตััะพะฒ ั ะพััะตัะพะผ ะพ ะฟะพะบัััะธะธ
make test-cov

# ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ะบะพะดะฐ
make format

# ะัะพะฒะตัะบะฐ ะบะฐัะตััะฒะฐ ะบะพะดะฐ (ruff)
make lint

# ะัะพะฒะตัะบะฐ ัะธะฟะพะฒ (mypy)
make type-check

# ะัะต ะฟัะพะฒะตัะบะธ (lint + type-check + test)
make check

# ะัะธััะบะฐ ะบะตัะฐ ะธ ะฒัะตะผะตะฝะฝัั ัะฐะนะปะพะฒ
make clean

# ะกะฟัะฐะฒะบะฐ ะฟะพ ะบะพะผะฐะฝะดะฐะผ
make help
```

### ๐๏ธ ะะฐะฑะพัะฐ ั ะฑะฐะทะพะน ะดะฐะฝะฝัั

```bash
# ะัะธะผะตะฝะธัั ะผะธะณัะฐัะธะธ
uv run alembic upgrade head

# ะัะบะฐัะธัั ะฟะพัะปะตะดะฝัั ะผะธะณัะฐัะธั
uv run alembic downgrade -1

# ะัะบะฐัะธัั ะฒัะต ะผะธะณัะฐัะธะธ
uv run alembic downgrade base

# ะกะพะทะดะฐัั ะฝะพะฒัั ะผะธะณัะฐัะธั (ะฟะพัะปะต ะธะทะผะตะฝะตะฝะธั ััะตะผั)
uv run alembic revision -m "ะพะฟะธัะฐะฝะธะต ะธะทะผะตะฝะตะฝะธะน"

# ะัะพัะผะพัั ะธััะพัะธะธ ะผะธะณัะฐัะธะน
uv run alembic history

# ะขะตะบััะฐั ะฒะตััะธั ะะ
uv run alembic current
```

**ะกัะตะผะฐ ะฑะฐะทั ะดะฐะฝะฝัั:**

- `users` - ะฟะพะปัะทะพะฒะฐัะตะปะธ ะฑะพัะฐ (ั soft delete)
  - id, username, first_name
  - created_at, last_accessed, deleted_at

- `messages` - ะธััะพัะธั ัะพะพะฑัะตะฝะธะน (ั soft delete)
  - id, user_id, role, content, length
  - created_at, deleted_at
  - INDEX (user_id, created_at)

- `messages_fts` - FTS5 ะฒะธัััะฐะปัะฝะฐั ัะฐะฑะปะธัะฐ ะดะปั ะฟะพะปะฝะพัะตะบััะพะฒะพะณะพ ะฟะพะธัะบะฐ
  - ะะฒัะพะผะฐัะธัะตัะบะธ ัะธะฝััะพะฝะธะทะธััะตััั ัะตัะตะท ััะธะณะณะตัั

### ๐ Code Quality

ะัะพะตะบั ะธัะฟะพะปัะทัะตั ัะพะฒัะตะผะตะฝะฝัะต ะธะฝััััะผะตะฝัั ะบะพะฝััะพะปั ะบะฐัะตััะฒะฐ ะบะพะดะฐ:

| ะะฝััััะผะตะฝั | ะะฐะทะฝะฐัะตะฝะธะต | ะะพะผะฐะฝะดะฐ |
|-----------|------------|---------|
| **ruff** | ะัััััะน ะปะธะฝัะตั (E, W, F, I, N, UP, B, C4, SIM) | `make lint` |
| **mypy** | ะกัะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ัะธะฟะพะฒ (strict mode) | `make type-check` |
| **black** | ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ะบะพะดะฐ | `make format` |
| **pytest** | ะะฐะฟััะบ ัะตััะพะฒ | `make test` |
| **pytest-cov** | ะะพะบัััะธะต ะบะพะดะฐ ัะตััะฐะผะธ (โฅ30%) | `make test-cov` |

**ะะตัะตะด ะบะพะผะผะธัะพะผ ะฒัะตะณะดะฐ ะทะฐะฟััะบะฐะนัะต:**
```bash
make check
```
ะญัะฐ ะบะพะผะฐะฝะดะฐ ะฒัะฟะพะปะฝะธั ะฒัะต ะฟัะพะฒะตัะบะธ: lint, type-check ะธ test.

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
systech-aidd-test/
โโโ src/                    # ะััะพะดะฝัะน ะบะพะด ะฑะพัะฐ
โ   โโโ main.py            # ะขะพัะบะฐ ะฒัะพะดะฐ ะฟัะธะปะพะถะตะฝะธั
โ   โโโ bot.py             # ะะปะฐัั ะฑะพัะฐ (aiogram)
โ   โโโ config.py          # ะฃะฟัะฐะฒะปะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะตะน
โ   โโโ logger.py          # ะะฐัััะพะนะบะฐ ะปะพะณะธัะพะฒะฐะฝะธั
โ   โโโ protocols.py       # Protocol ะธะฝัะตััะตะนัั (DI)
โ   โโโ dependencies.py    # ะะพะฝัะตะนะฝะตั ะทะฐะฒะธัะธะผะพััะตะน (DI)
โ   โโโ validators.py      # ะะฐะปะธะดะฐัะธั ะฒัะพะดะฝัั ะดะฐะฝะฝัั
โ   โโโ metrics.py         # ะกะธััะตะผะฐ ะผะตััะธะบ
โ   โโโ role_manager.py    # ะฃะฟัะฐะฒะปะตะฝะธะต ัะพะปัะผะธ ะธ ะฟัะพะผะฟัะฐะผะธ
โ   โโโ database/          # ะกะปะพะน ะดะพัััะฟะฐ ะบ ะดะฐะฝะฝัะผ
โ   โ   โโโ __init__.py
โ   โ   โโโ repository.py  # DatabaseManager, UserRepository, MessageRepository
โ   โโโ handlers/          # ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด ะธ ัะพะพะฑัะตะฝะธะน
โ   โ   โโโ handlers.py
โ   โโโ middlewares/       # Middlewares ะดะปั aiogram
โ       โโโ __init__.py
โ       โโโ rate_limit.py           # Rate limiting
โ       โโโ dependency_injection.py  # Dependency Injection
โโโ llm/                   # LLM ะบะปะธะตะฝั
โ   โโโ client.py         # ะะปะฐัั ะดะปั ัะฐะฑะพัั ั OpenRouter API (retry logic)
โโโ alembic/               # ะะธะณัะฐัะธะธ ะฑะฐะทั ะดะฐะฝะฝัั
โ   โโโ versions/          # ะคะฐะนะปั ะผะธะณัะฐัะธะน
โ   โ   โโโ 001_initial_schema.py
โ   โโโ env.py             # Async ะผะธะณัะฐัะธะธ
โ   โโโ script.py.mako     # ะจะฐะฑะปะพะฝ ะผะธะณัะฐัะธะน
โโโ tests/                 # ะขะตััั (pytest) - 105+ ัะตััะพะฒ
โ   โโโ test_config.py         # ะขะตััั ะบะพะฝัะธะณััะฐัะธะธ (18 ัะตััะพะฒ)
โ   โโโ test_integration.py    # ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั (8 ัะตััะพะฒ)
โ   โโโ test_rate_limit.py     # ะขะตััั rate limiting (7 ัะตััะพะฒ)
โ   โโโ test_dependencies.py   # ะขะตััั DI (7 ัะตััะพะฒ)
โ   โโโ test_metrics.py        # ะขะตััั ะผะตััะธะบ (16 ัะตััะพะฒ)
โ   โโโ test_validators.py     # ะขะตััั ะฒะฐะปะธะดะฐัะธะธ (7 ัะตััะพะฒ)
โ   โโโ test_role_manager.py   # ะขะตััั ะผะตะฝะตะดะถะตัะฐ ัะพะปะตะน
โ   โโโ test_repository.py     # ะขะตััั ัะตะฟะพะทะธัะพัะธะตะฒ (16 ัะตััะพะฒ)
โโโ data/                  # ะะฐะทะฐ ะดะฐะฝะฝัั (ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)
โ   โโโ .gitkeep          # ะะปั git
โ   โโโ bot.db            # SQLite ะฑะฐะทะฐ ะดะฐะฝะฝัั
โโโ docs/                  # ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ
โ   โโโ vision.md              # ะขะตัะฝะธัะตัะบะพะต ะฒะธะดะตะฝะธะต
โ   โโโ idea.md                # ะะพะฝัะตะฟัะธั ะฟัะพะตะบัะฐ
โ   โโโ roadmap.md             # Roadmap ัะฟัะธะฝัะพะฒ
โ   โโโ tasklists/             # ะะปะฐะฝั ัะฐะทัะฐะฑะพัะบะธ
โ   โโโ code_review_summary.md # ะะตะทัะปััะฐัั code review
โ   โโโ architecture_overview.md # ะะฑะทะพั ะฐััะธัะตะบัััั
โโโ prompts/               # ะคะฐะนะปั ะฟัะพะผะฟัะพะฒ ะดะปั ัะพะปะตะน
โ   โโโ nutritionist.txt   # ะัะพะผะฟั ะฝัััะธัะธะพะปะพะณะฐ
โโโ logs/                  # ะะพะณะธ ะฑะพัะฐ (ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ)
โ   โโโ bot.log           # ะคะฐะนะป ะปะพะณะพะฒ ั ัะพัะฐัะธะตะน (10MB, 5 ัะฐะนะปะพะฒ)
โโโ .env                   # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ะฝะต ะฒ git)
โโโ .env.example          # ะัะธะผะตั ะบะพะฝัะธะณััะฐัะธะธ
โโโ alembic.ini           # ะะพะฝัะธะณััะฐัะธั Alembic
โโโ Dockerfile            # Multi-stage Docker ะพะฑัะฐะท
โโโ docker-compose.yml    # Docker Compose ะบะพะฝัะธะณััะฐัะธั
โโโ entrypoint.sh         # Entrypoint ะดะปั Docker (ะผะธะณัะฐัะธะธ + ะทะฐะฟััะบ)
โโโ .dockerignore         # ะะณะฝะพัะธััะตะผัะต ัะฐะนะปั ะดะปั Docker
โโโ pyproject.toml        # ะะพะฝัะธะณััะฐัะธั ะฟัะพะตะบัะฐ ะธ ะทะฐะฒะธัะธะผะพััะธ
โโโ uv.lock               # Lock-ัะฐะนะป ะทะฐะฒะธัะธะผะพััะตะน
โโโ Makefile              # ะะพะผะฐะฝะดั ะดะปั ัะฐะทัะฐะฑะพัะบะธ
โโโ presentation.md       # ะัะตะทะตะฝัะฐัะธั ะฒัะฟะพะปะฝะตะฝะฝะพะน ัะฐะฑะพัั
โโโ README.md             # ะญัะพั ัะฐะนะป
```

### ะัะธะฝัะธะฟั ัะฐะทัะฐะฑะพัะบะธ

ะัะพะตะบั ัะปะตะดัะตั ัััะพะณะธะผ ะฟัะธะฝัะธะฟะฐะผ ัะฐะทัะฐะฑะพัะบะธ:

- โ **KISS** (Keep It Simple, Stupid) - ะผะฐะบัะธะผะฐะปัะฝะฐั ะฟัะพััะพัะฐ ัะตัะตะฝะธะน
- โ **SOLID** - ะฟัะธะผะตะฝะตะฝะธะต ะฟัะธะฝัะธะฟะพะฒ ะพะฑัะตะบัะฝะพ-ะพัะธะตะฝัะธัะพะฒะฐะฝะฝะพะณะพ ะฟัะพะตะบัะธัะพะฒะฐะฝะธั
  - **Dependency Inversion**: Protocol interfaces ะฒะผะตััะพ ะบะพะฝะบัะตัะฝัั ะบะปะฐััะพะฒ
  - **Single Responsibility**: ะบะฐะถะดัะน ะบะปะฐัั ะพัะฒะตัะฐะตั ะทะฐ ะพะดะฝั ะทะฐะดะฐัั
  - **Open/Closed**: ัะฐััะธััะตะผะพััั ัะตัะตะท middleware ะธ DI
- โ **1 ะบะปะฐัั = 1 ัะฐะนะป** - ัััะพะณะพะต ะฟัะฐะฒะธะปะพ ะดะปั ัะธัะฐะตะผะพััะธ
- โ **Dependency Injection** - ัะปะฐะฑะฐั ัะฒัะทะฐะฝะฝะพััั ะบะพะผะฟะพะฝะตะฝัะพะฒ
- โ **ะะธะฝะธะผัะผ ะทะฐะฒะธัะธะผะพััะตะน** - ัะพะปัะบะพ ะฝะตะพะฑัะพะดะธะผัะต ะฑะธะฑะปะธะพัะตะบะธ
- โ **ะฏะฒะฝะพะต ะปัััะต ะฝะตัะฒะฝะพะณะพ** - ะฟะพะฝััะฝัะน ะธ ัะธัะฐะตะผัะน ะบะพะด
- โ **Type Safety** - ัััะพะณะฐั ัะธะฟะธะทะฐัะธั (mypy strict mode)
- โ **ะะตะท ะพะฒะตัะธะฝะถะธะฝะธัะธะฝะณะฐ** - ะฝะธะบะฐะบะธั ะธะทะฑััะพัะฝัั ะฐะฑัััะฐะบัะธะน

ะะพะดัะพะฑะฝะตะต ัะผ. [docs/vision.md](docs/vision.md)

---

## ๐ ะกัะฐััั ะฟัะพะตะบัะฐ

### ะะตะฐะปะธะทะพะฒะฐะฝะพ (v1.0)
- โ ะะฐะทะพะฒะฐั ะธะฝััะฐััััะบัััะฐ ะฟัะพะตะบัะฐ
- โ Telegram ะฑะพั ั aiogram
- โ ะะฝัะตะณัะฐัะธั ั LLM ัะตัะตะท OpenRouter
- โ ะะพะฝัะตะบััะฝัะต ะดะธะฐะปะพะณะธ ั ะพะณัะฐะฝะธัะตะฝะธะตะผ ะธััะพัะธะธ
- โ ะะพะผะฐะฝะดั /start ะธ /clear
- โ ะะพะปะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต ั ัะพัะฐัะธะตะน
- โ ะะฐะปะธะดะฐัะธั ะบะพะฝัะธะณััะฐัะธะธ
- โ ะะพะผะฟะปะตะบัะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต (89 ัะตััะพะฒ, 70.17% ะฟะพะบัััะธั)

### ะะตะฐะปะธะทะพะฒะฐะฝะพ (v2.0 - Production Ready)
**ะะฐัะฐ ะทะฐะฒะตััะตะฝะธั:** 11.10.2025

#### ๐ Security & Validation
- โ Rate limiting (1 ัะพะพะฑัะตะฝะธะต ะฒ 2 ัะตะบัะฝะดั)
- โ ะะฐะปะธะดะฐัะธั ะฒัะพะดะฝัั ะดะฐะฝะฝัั (ะผะฐะบั 4000 ัะธะผะฒะพะปะพะฒ)
- โ ะกะบัััะธะต ะฒะฝัััะตะฝะฝะธั ะพัะธะฑะพะบ ะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- โ Graceful error handling

#### ๐๏ธ Architecture Refactoring
- โ Dependency Injection (DI) ะฐััะธัะตะบัััะฐ
- โ Protocol-based interfaces (SOLID)
- โ ะฃะฑัะฐะฝั ะฒัะต ะณะปะพะฑะฐะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต
- โ Retry logic ะดะปั Telegram API (3 ะฟะพะฟััะบะธ)

#### โก Memory & Performance
- โ LRU cache ะดะปั UserStorage (ะผะฐะบั 1000 ะทะฐะฟะธัะตะน)
- โ LRU cache ะดะปั ConversationStorage (ะผะฐะบั 1000 ะทะฐะฟะธัะตะน)
- โ TTL ะผะตัะฐะฝะธะทะผ (ะฐะฒัะพะพัะธััะบะฐ ัะตัะตะท 24 ัะฐัะฐ)
- โ ะะฐัะธัะฐ ะพั ััะตัะตะบ ะฟะฐะผััะธ

#### ๐ง Code Quality Tools
- โ Ruff ะปะธะฝัะตั (ะธัะฟัะฐะฒะปะตะฝะพ 294 ะพัะธะฑะบะธ)
- โ Mypy ัะธะฟะธะทะฐัะธั (ะธัะฟัะฐะฒะปะตะฝะพ 60 ะพัะธะฑะพะบ)
- โ Black ัะพัะผะฐัะธัะพะฒะฐะฝะธะต
- โ ะะฒัะพะผะฐัะธะทะฐัะธั ะฟัะพะฒะตัะพะบ (`make check`)

#### ๐งช Testing & Monitoring
- โ ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั (8 ัะตััะพะฒ)
- โ Unit ัะตััั ะดะปั middlewares (14 ัะตััะพะฒ)
- โ ะกะธััะตะผะฐ ะผะตััะธะบ (BotMetrics)
- โ ะะพะบัััะธะต ะบะพะดะฐ 70.17% (+37.48%)

**ะะตะทัะปััะฐัั:**
- ๐ฏ Production Ready: 4/10 โ 8/10 (+100%)
- ๐ ะขะตััั: 43 โ 89 (+107%)
- ๐ก๏ธ Security: 5/10 โ 9/10 (+80%)
- ๐๏ธ Architecture: 7/10 โ 9/10 (+29%)

ะกะผ. ะดะตัะฐะปะธ ะฒ [docs/tasklist_tech_debt.md](docs/tasklist_tech_debt.md) ะธ [presentation.md](presentation.md)

### ะะตะฐะปะธะทะพะฒะฐะฝะพ (Sprint S1 - Database Persistence)
**ะะฐัะฐ ะทะฐะฒะตััะตะฝะธั:** 16.10.2025

#### ๐พ Database Layer
- โ SQLite ะฑะฐะทะฐ ะดะฐะฝะฝัั ั FTS5 ะดะปั ะฟะพะปะฝะพัะตะบััะพะฒะพะณะพ ะฟะพะธัะบะฐ
- โ Async ะดัะฐะนะฒะตั aiosqlite ะดะปั ัะฐะฑะพัั ั ะะ
- โ Repository pattern ะดะปั ัะปะพั ะดะฐะฝะฝัั (ะฑะตะท ORM)
- โ Soft delete ะดะปั users ะธ messages
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒััะธัะปะตะฝะธะต ะผะตัะฐะดะฐะฝะฝัั (length, created_at)

#### ๐ Migrations & Tooling
- โ Alembic ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะผะธะณัะฐัะธัะผะธ ะะ
- โ Async ะผะธะณัะฐัะธะธ ั ะฟะพะดะดะตัะถะบะพะน aiosqlite
- โ ะะตัะฒะฐั ะผะธะณัะฐัะธั: users, messages, messages_fts, ััะธะณะณะตัั
- โ ะะพะผะฐะฝะดั ะดะปั upgrade/downgrade ะผะธะณัะฐัะธะน

#### ๐ณ Docker Infrastructure
- โ Multi-stage Dockerfile (builder + runtime)
- โ Docker Compose ั volumes ะดะปั data ะธ logs
- โ Entrypoint ัะบัะธะฟั ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ ะฟัะธะผะตะฝะตะฝะธะตะผ ะผะธะณัะฐัะธะน
- โ ะะพัะพะฒัะน .dockerignore

#### ๐งช Testing
- โ 16 ะฝะพะฒัั ัะตััะพะฒ ะดะปั ัะตะฟะพะทะธัะพัะธะตะฒ (100% pass rate)
- โ ะขะตััั DatabaseManager, UserRepository, MessageRepository
- โ ะขะตััั FTS5 ะฟะพะปะฝะพัะตะบััะพะฒะพะณะพ ะฟะพะธัะบะฐ
- โ ะขะตััั soft delete ะผะตัะฐะฝะธะทะผะฐ

**ะะตะทัะปััะฐัั:**
- ๐พ ะะฐะฝะฝัะต ัะตะฟะตัั ัะพััะฐะฝััััั ะผะตะถะดั ะฟะตัะตะทะฐะฟััะบะฐะผะธ
- ๐ ะะพัะพะฒัะน ะผะตัะฐะฝะธะทะผ ะฟะพะปะฝะพัะตะบััะพะฒะพะณะพ ะฟะพะธัะบะฐ
- ๐ณ ะัะพััะพะน ะทะฐะฟััะบ ัะตัะตะท docker-compose
- ๐ ะขะตััั: 89 โ 105+ (+18%)

ะกะผ. ะฟะปะฐะฝ ัะฟัะธะฝัะฐ ะฒ [.cursor/plans/sprint-s1-database-bc5c0f7f.plan.md](.cursor/plans/sprint-s1-database-bc5c0f7f.plan.md)

### ะะปะฐะฝะธััะตััั (ะฑัะดััะธะต ัะฐััะธัะตะฝะธั)
- โณ ะะพะผะฐะฝะดะฐ /role - ะฟะตัะตะบะปััะตะฝะธะต ัะพะปะตะน AI
- โณ ะะพะผะฐะฝะดะฐ /stats - ััะฐัะธััะธะบะฐ ัะฐะฑะพัั ะฑะพัะฐ
- โณ ะะพะผะฐะฝะดะฐ /search - ะฟะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ ะฟะพ ะธััะพัะธะธ
- โณ ะะฐัััะพะนะบะฐ ะฟะฐัะฐะผะตััะพะฒ LLM (ัะตะผะฟะตัะฐัััะฐ, max_tokens)
- โณ ะญะบัะฟะพัั ะธััะพัะธะธ ะดะธะฐะปะพะณะฐ ะฒ ัะฐะนะป
- โณ ะะพะดะดะตัะถะบะฐ ะณะพะปะพัะพะฒัั ัะพะพะฑัะตะฝะธะน
- โณ ะะพัะพะบะพะฒะฐั ะฟะตัะตะดะฐัะฐ ะพัะฒะตัะพะฒ (streaming)
- โณ ะะพะดะดะตัะถะบะฐ ะธะทะพะฑัะฐะถะตะฝะธะน (vision models)

ะกะผ. ะฟะพะปะฝัะน ะฟะปะฐะฝ ะฒ [docs/roadmap.md](docs/roadmap.md)

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั ะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะะตะทะพะฟะฐัะฝะพััั
- **Rate Limiting**: ะะฐัะธัะฐ ะพั ัะฟะฐะผะฐ ะธ DDoS ะฐัะฐะบ (1 ัะพะพะฑัะตะฝะธะต/2 ัะตะบ)
- **ะะฐะปะธะดะฐัะธั ะฒัะพะดะฝัั ะดะฐะฝะฝัั**: ะัะพะฒะตัะบะฐ ะดะปะธะฝั ะธ ัะพะดะตัะถะธะผะพะณะพ ัะพะพะฑัะตะฝะธะน
- **ะกะบัััะธะต ะพัะธะฑะพะบ**: ะะฝัััะตะฝะฝะธะต ะดะตัะฐะปะธ ะฝะต ะฟะพะบะฐะทัะฒะฐัััั ะฟะพะปัะทะพะฒะฐัะตะปัะผ
- **Soft delete**: ะะตะทะพะฟะฐัะฝะพะต ัะดะฐะปะตะฝะธะต ั ะฒะพะทะผะพะถะฝะพัััั ะฒะพัััะฐะฝะพะฒะปะตะฝะธั
- **Graceful shutdown**: ะะพััะตะบัะฝะพะต ะทะฐะบัััะธะต ะะ ะธ ะทะฐะฒะตััะตะฝะธะต ัะฐะฑะพัั

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั
- **SQLite + WAL mode**: ะััััะฐั ะะ ั ะปัััะตะน ะบะพะฝะบััะตะฝัะฝะพัััั
- **FTS5 ะธะฝะดะตะบัั**: ะะณะฝะพะฒะตะฝะฝัะน ะฟะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ ะฟะพ ะธััะพัะธะธ
- **ะะฝะดะตะบัะธัะพะฒะฐะฝะธะต**: ะะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัะต ะธะฝะดะตะบัั (user_id, created_at)
- **Async ะพะฟะตัะฐัะธะธ**: ะะตะฑะปะพะบะธััััะธะต ะทะฐะฟัะพัั ะบ ะะ ัะตัะตะท aiosqlite
- **Retry logic**: ะะฒัะพะผะฐัะธัะตัะบะธะต ะฟะพะฒัะพัะฝัะต ะฟะพะฟััะบะธ ะฟัะธ ัะตัะตะฒัั ัะฑะพัั

### ะะตััะธััะตะฝัะฝะพััั
- **SQLite ะะ**: ะัะต ะดะฐะฝะฝัะต ัะพััะฐะฝััััั ะผะตะถะดั ะฟะตัะตะทะฐะฟััะบะฐะผะธ
- **ะะธะณัะฐัะธะธ**: ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต ััะตะผั ะะ ัะตัะตะท Alembic
- **Docker volumes**: ะะตััะธััะตะฝัะฝัะต ัะพะผะฐ ะดะปั data/ ะธ logs/
- **ะขัะฐะฝะทะฐะบัะธะธ**: ACID ะณะฐัะฐะฝัะธะธ ะดะปั ัะตะปะพััะฝะพััะธ ะดะฐะฝะฝัั

### ะะพะฝะธัะพัะธะฝะณ
- **ะกะธััะตะผะฐ ะผะตััะธะบ**: ะััะปะตะถะธะฒะฐะฝะธะต ะทะฐะฟัะพัะพะฒ, ะพัะธะฑะพะบ, ัะพะบะตะฝะพะฒ ะธ ััะพะธะผะพััะธ
- **ะะตัะฐะปัะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต**: ะัะต ะฒะฐะถะฝัะต ัะพะฑััะธั ะทะฐะฟะธััะฒะฐัััั ะฒ ะปะพะณ
- **Error tracking**: ะะพะปะฝัะต traceback'ะธ ะดะปั ะพัะปะฐะดะบะธ

---

## ๐ ะะธัะตะฝะทะธั

MIT License - ัะฒะพะฑะพะดะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะธ ะผะพะดะธัะธะบะฐัะธั.

---

## ๐จโ๐ป ะะฒัะพั

**Systech AIDD Test Project**

ะกะพะทะดะฐะฝะพ ะดะปั ะดะตะผะพะฝัััะฐัะธะธ ะฝะฐะฒัะบะพะฒ ัะฐะทัะฐะฑะพัะบะธ Telegram-ะฑะพัะพะฒ ั ะธะฝัะตะณัะฐัะธะตะน LLM.

---

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

ะัะพะตะบั ะพัะบััั ะดะปั ัะปัััะตะฝะธะน! ะัะปะธ ะฒั ัะพัะธัะต ะดะพะฑะฐะฒะธัั ะฝะพะฒัะต ััะฝะบัะธะธ ะธะปะธ ะธัะฟัะฐะฒะธัั ะพัะธะฑะบะธ:

1. ะะทะฝะฐะบะพะผััะตัั ั [docs/vision.md](docs/vision.md) ะดะปั ะฟะพะฝะธะผะฐะฝะธั ะฐััะธัะตะบัััั
2. ะะทััะธัะต [docs/tasklist.md](docs/tasklist.md) ะดะปั ะฟะปะฐะฝะธัะพะฒะฐะฝะธั
3. ะกะปะตะดัะนัะต ะฟัะธะฝัะธะฟะฐะผ KISS ะธ ัััะตััะฒัััะตะผั ััะธะปั ะบะพะดะฐ
4. ะะพะฑะฐะฒััะต ัะตััั ะดะปั ะฝะพะฒะพะณะพ ััะฝะบัะธะพะฝะฐะปะฐ

---

## ๐ ะะพะปะตะทะฝัะต ัััะปะบะธ

- [Aiogram Documentation](https://docs.aiogram.dev/)
- [OpenRouter API](https://openrouter.ai/docs)
- [Python Telegram Bot Guide](https://core.telegram.org/bots/api)
- [UV Package Manager](https://github.com/astral-sh/uv)

---

**ะะพะฟัะพัั?** ะกะพะทะดะฐะนัะต issue ะฒ ัะตะฟะพะทะธัะพัะธะธ ะธะปะธ ะพะฑัะฐัะธัะตัั ะบ ะดะพะบัะผะตะฝัะฐัะธะธ ะฒ ะฟะฐะฟะบะต `docs/`.
