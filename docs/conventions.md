# Соглашения по разработке

> **Важно:** Все решения должны соответствовать принципам из [vision.md](./vision.md)

## Ключевые принципы

### KISS - Keep It Simple, Stupid
- Простое решение всегда лучше сложного
- Никаких избыточных абстракций и паттернов проектирования
- Если можно решить проще - решай проще

### Структура кода
- **1 класс = 1 файл** (строго)
- Имя файла = имя класса в snake_case
- ООП подход - использование классов для организации логики

### Зависимости
- Минимум внешних библиотек
- Только те библиотеки, которые указаны в [vision.md](./vision.md)
- Не добавляй новые зависимости без необходимости

## Правила кодирования

### Python код
- Форматирование: **black** (по умолчанию)
- Явное лучше неявного - понятный и читаемый код
- Type hints для параметров и возвращаемых значений
- Docstrings для классов и публичных методов

### Именование
- Классы: `PascalCase`
- Функции/методы: `snake_case`
- Константы: `UPPER_CASE`
- Приватные атрибуты: `_leading_underscore`

### Архитектура
- Следуй структуре проекта из [vision.md](./vision.md)
- Не создавай новые слои абстракции
- Логика разделяется по классам согласно схеме компонентов

### Хранение данных
- In-memory: словари и списки в классах
- `UserStorage`: `{chat_id: User}`
- `ConversationStorage`: `{chat_id: Conversation}`

## Что НЕ делать

- ❌ Не создавай базовые классы и абстракции без явной необходимости
- ❌ Не используй сложные паттерны проектирования
- ❌ Не дублируй код из vision.md - ссылайся на него
- ❌ Не добавляй функции "на будущее"
- ❌ Не используй внешние БД, ORM, DI-контейнеры

## Процесс разработки

1. **Сначала работающий MVP** - потом улучшения
2. **Итеративно** - маленькими шагами
3. **Тестируй** - базовые тесты с pytest
4. **Логируй** - важные события в текстовый файл

## Референс

Полная информация о технологиях, архитектуре и моделях данных находится в [vision.md](./vision.md).

