# ADR-001: Выбор технологического стека для Frontend

**Дата:** 17 октября 2025
**Статус:** Принято
**Автор:** Development Team

## Контекст

Проект systech-aidd-test требует создания веб-интерфейса для дашборда статистики Telegram бота и ИИ-чата. Backend API уже реализован на FastAPI и предоставляет REST endpoints для получения данных.

### Требования к frontend:

1. **Дашборд статистики** - отображение 4 KPI метрик и временных графиков
2. **ИИ-чат интерфейс** - веб-версия Telegram бота для администраторов
3. **Современный UI/UX** - профессиональный внешний вид с использованием референса shadcn/ui
4. **Типобезопасность** - минимизация ошибок на этапе разработки
5. **Производительность** - быстрая загрузка и отзывчивость
6. **Масштабируемость** - возможность расширения функциональности
7. **Developer Experience** - удобство разработки и поддержки

## Решение

Выбран следующий технологический стек:

- **Framework:** Next.js 14+ (App Router)
- **Язык:** TypeScript
- **UI Library:** shadcn/ui
- **Styling:** Tailwind CSS
- **Пакетный менеджер:** pnpm

## Обоснование выбора

### Next.js 14+ (App Router)

**Выбрано потому что:**
- **Server-Side Rendering (SSR)** - улучшенная производительность и SEO
- **App Router** - новая архитектура с React Server Components
- **Автоматическая оптимизация** - code splitting, image optimization, font optimization
- **API Routes** - возможность создания backend endpoints при необходимости
- **File-based routing** - интуитивная структура проекта
- **Отличная документация** - официальные гайды и большое community
- **Production-ready** - используется крупными компаниями (Vercel, Netflix, Twitch)

**Преимущества для проекта:**
- Готовая инфраструктура для дашборда и чата
- Оптимизация производительности "из коробки"
- Простая интеграция с Backend API
- Удобный deployment (Vercel, Docker)

### TypeScript

**Выбрано потому что:**
- **Типобезопасность** - раннее обнаружение ошибок на этапе разработки
- **Лучший DX** - автодополнение, refactoring, navigation в IDE
- **Документация через типы** - типы служат документацией к API
- **Контракт с Backend** - строгое соответствие API контракту
- **Снижение багов** - меньше runtime ошибок в production

**Преимущества для проекта:**
- Типизированные API responses (KPIMetric, StatsResponse)
- Безопасный refactoring при изменениях
- Лучшая поддерживаемость кода
- Стандарт для современных frontend проектов

### shadcn/ui

**Выбрано потому что:**
- **Copy-paste компоненты** - код копируется в проект, полный контроль
- **Radix UI primitives** - accessibility и keyboard navigation из коробки
- **Tailwind-based** - консистентная стилизация
- **Кастомизация** - полная свобода в изменении компонентов
- **Качественный дизайн** - профессиональные UI patterns
- **Референс доступен** - официальный dashboard example

**Преимущества для проекта:**
- Быстрая разработка с готовыми компонентами (Card, Table, Chart)
- Соответствие референсу дизайна
- Доступность (a11y) без дополнительных усилий
- Нет vendor lock-in (код в нашем репозитории)

### Tailwind CSS

**Выбрано потому что:**
- **Utility-first подход** - быстрая разработка без написания CSS
- **Консистентный дизайн** - design tokens из коробки (spacing, colors, typography)
- **Responsive design** - легкая адаптация под разные экраны
- **Production optimization** - PurgeCSS удаляет неиспользуемые стили
- **Прекрасная интеграция** - с Next.js и shadcn/ui
- **Большое community** - множество готовых примеров и плагинов

**Преимущества для проекта:**
- Быстрая разработка UI без написания custom CSS
- Единообразный стиль во всем приложении
- Малый размер bundle (только используемые стили)
- Простая кастомизация темы

### pnpm

**Выбрано потому что:**
- **Скорость установки** - в 2-3 раза быстрее npm/yarn
- **Экономия места** - content-addressable storage (одна копия пакета на диск)
- **Строгость** - strict peer dependencies, нет phantom dependencies
- **Совместимость** - полная поддержка npm ecosystem
- **Монорепо поддержка** - готовность к масштабированию проекта

**Преимущества для проекта:**
- Быстрая установка зависимостей в CI/CD
- Меньше места на диске для node_modules
- Более безопасное управление зависимостями
- Современный стандарт для новых проектов

## Рассмотренные альтернативы

### Vite + React

**Не выбрано:**
- Нет SSR из коробки (нужно настраивать вручную)
- Нет file-based routing
- Требует больше конфигурации для production-ready приложения
- Хотя Vite быстрее в dev mode, Next.js предоставляет больше возможностей

### Material-UI (MUI)

**Не выбрано:**
- Тяжеловесная библиотека (больший bundle size)
- Опinionated дизайн (сложнее кастомизация)
- Vendor lock-in (зависимость от сторонней библиотеки)
- shadcn/ui предоставляет больше гибкости

### styled-components / Emotion

**Не выбрано:**
- Runtime overhead (генерация CSS в браузере)
- Больший bundle size
- Медленнее чем Tailwind
- Tailwind + CSS modules покрывают все потребности

### npm / yarn

**Не выбрано:**
- npm: медленнее pnpm, нет content-addressable storage
- yarn (classic): устаревший, медленнее pnpm
- yarn (berry): breaking changes, меньше adoption

## Последствия

### Положительные

1. **Быстрая разработка**
   - Готовые компоненты shadcn/ui
   - Utility-first Tailwind CSS
   - Hot reload и fast refresh в Next.js

2. **Высокое качество кода**
   - TypeScript предотвращает ошибки
   - ESLint и Prettier встроены
   - Строгая типизация API контрактов

3. **Отличная производительность**
   - Автоматические оптимизации Next.js
   - Minimal bundle size с Tailwind PurgeCSS
   - Server Components для уменьшения JS на клиенте

4. **Масштабируемость**
   - Модульная архитектура компонентов
   - Готовность к добавлению новых фич (SP-FE-3, SP-FE-4)
   - Возможность превращения в монорепо с pnpm

5. **Developer Experience**
   - Отличный TypeScript support в Next.js
   - Интуитивная структура проекта
   - Большое community и документация

### Негативные / Компромиссы

1. **Кривая обучения**
   - Next.js App Router - относительно новая технология
   - Tailwind требует привыкания к utility-first подходу
   - Необходимо изучение React Server Components

   *Митигация:* Хорошая документация, активное community, референсные примеры

2. **Vendor lock-in на Next.js**
   - Сложно мигрировать на другой фреймворк
   - Зависимость от Vercel ecosystem

   *Митигация:* Next.js - индустриальный стандарт, большая adoption, Vercel инвестирует в развитие

3. **Размер node_modules**
   - Даже с pnpm frontend зависимости занимают место
   - Next.js + React + dependencies ~500MB

   *Митигация:* pnpm экономит место, в production bundle минимален

4. **Не подходит для статических сайтов**
   - Избыточен для простых лендингов
   - Требует Node.js сервер для SSR

   *Митигация:* Наш проект требует динамики и SSR, поэтому это оправдано

## Миграционная стратегия

Переход на другой стек в будущем (если потребуется):

1. **С Next.js на другой фреймворк**
   - React компоненты переиспользуемы
   - shadcn/ui компоненты копируются
   - Tailwind классы портируемы
   - API клиент не зависит от Next.js

2. **С shadcn/ui на другую библиотеку**
   - Код компонентов в нашем репозитории
   - Можем постепенно заменять компоненты
   - Нет runtime зависимостей

3. **С Tailwind на другое решение**
   - Можно постепенно мигрировать на CSS modules
   - Или добавить styled-components параллельно
   - Tailwind не навязывает архитектуру

## Связанные решения

- **Backend:** FastAPI (уже реализовано в SP-FE-1)
- **API контракт:** REST API `/stats` endpoint
- **Deployment:** Docker + Docker Compose (планируется)
- **Мониторинг:** Frontend метрики (планируется в будущем)

## Ссылки

- [Next.js Documentation](https://nextjs.org/docs)
- [shadcn/ui Components](https://ui.shadcn.com/)
- [shadcn/ui Dashboard Reference](https://ui.shadcn.com/view/dashboard-01)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [pnpm Documentation](https://pnpm.io/)

## История изменений

| Дата | Изменение | Автор |
|------|-----------|-------|
| 2025-10-17 | Первая версия ADR | Development Team |

